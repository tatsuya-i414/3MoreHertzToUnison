(function(h,a,g){var f="./data/others/plugin/loading/image/";var e="./data/others/plugin/loading/data/";var i=a.kag.config.scWidth;var b=a.kag.config.scHeight;a.kag.tmp.loading={csv:{},prog:{}};a.kag.tag.loading={vital:[],pm:{bgcolor:"0x000000",bgimage:""},start:function(k){if(h("#loading").length!=0){h("#loading").remove()}h("#tyrano_base").append("<div id='loading'>");var j=h("#tyrano_base").find("#loading");j.css({position:"absolute",width:i+"px",height:b+"px",display:"none"});if(k.bgimage!=""){j.css({background:"url('"+f+k.bgimage+"') no-repeat"})}else{j.css({"background-color":h.convertColor(k.bgcolor)})}a.kag.ftag.nextOrder()}};a.kag.tag.loading_image={vital:["name","img"],pm:{name:"",img:"",x:"",y:"",width:"",height:"",effect:"",effect_time:"1000"},start:function(k){var j=h("#tyrano_base").find("#loading");j.append("<img class='loading_image' id='loading_image_"+k.name+"' src='"+f+k.img+"'>");var l=j.find("#loading_image_"+k.name);l.css({position:"absolute",top:k.y+"px",left:k.x+"px",width:k.width+"px",height:k.height+"px"});if(k.effect!=""){l.addClass("animated infinite "+k.effect);l.css({"-webkit-animation-duration":k.effect_time+"ms","animation-duration":k.effect_time+"ms","animation-timing-function":"linear"})}a.kag.ftag.nextOrder()}};a.kag.tag.loading_text={vital:["name","text"],pm:{name:"",text:"",face:a.kag.config.userFace,size:a.kag.config.defaultFontSize,color:"0xFFFFFF",bold:a.kag.config.defaultBold,x:"",y:"",effect:"",effect_time:"1000"},start:function(k){var j=h("#tyrano_base").find("#loading");j.append("<div class='loading_text' id='loading_text_"+k.name+"'>"+k.text+"</div>");var l=j.find("#loading_text_"+k.name);l.css({position:"absolute",left:k.x+"px",top:k.y+"px","font-family":k.face,"font-size":k.size+"px",color:h.convertColor(k.color),"font-weight":h.convertBold(k.bold)});if(k.effect!=""){l.addClass("animated infinite "+k.effect);l.css({"-webkit-animation-duration":k.effect_time+"ms","animation-duration":k.effect_time+"ms","animation-timing-function":"linear"})}a.kag.ftag.nextOrder()}};a.kag.tag.loading_prog={vital:["width","height"],pm:{width:"",height:"",color:"0xFFFFFF",color_bar:"0xFF0000",img_bg:"",img_bar:"",img_frame:"",x:"",y:"",radius:""},start:function(n){a.kag.tmp.loading.prog.width=n.width;var j=h("#tyrano_base").find("#loading");j.append("<div id='loading_prog'><div id='loading_prog_bg'><div id='loading_prog_bar'>");var m=j.find("#loading_prog");j.append("<div id='loading_prog_frame'>");var o=j.find("#loading_prog_bg");var l=j.find("#loading_prog_bar");var k=j.find("#loading_prog_frame");m.css({position:"absolute",top:n.y+"px",left:n.x+"px",width:n.width+"px",height:n.height+"px"});o.css({position:"absolute",width:"100%",height:"100%","border-radius":n.radius+"px",display:"none"});l.css({position:"absolute",width:"0",height:"100%",background:h.convertColor(n.color_bar),"border-radius":n.radius+"px"});k.css({position:"absolute",top:n.y+"px",left:n.x+"px",width:n.width+"px",height:n.height+"px",display:"none"});if(n.img_bar!=""){if(n.img_bg!=""){o.css({background:"url('"+f+n.img_bg+"') no-repeat","background-size":"cover"})}if(n.img_frame){k.css({background:"url('"+f+n.img_frame+"') no-repeat","background-size":"cover",display:"block"})}o.css({display:"block"});l.css({background:"url('"+f+n.img_bar+"') no-repeat","background-size":"cover",display:"block"})}else{o.css({"background-color":h.convertColor(n.color),display:"block"})}a.kag.ftag.nextOrder()}};a.kag.tag.endloading={vital:[],pm:{},start:function(j){a.kag.ftag.nextOrder()}};a.kag.tag.loading_show={vital:["file"],pm:{file:"",time:"300"},start:function(k){a.kag.tmp.loading.csv.line=[];var j=h("#tyrano_base").find("#loading");j.fadeIn(k.time,function(){c(e+k.file,function(){var o=a.kag.tmp.loading.csv.line;var n=a.kag.tmp.loading.prog.width/o.length;var l=h("#tyrano_base").find("#loading").find("#loading_prog_bar");var p=0;for(var m=0;m<o.length;m++){a.kag.ftag.startTag("preload",{storage:o[m],next_order:"false"});l.animate({width:(n*(m+1))+"px"},0,"linear",function(){p=p+1;if(p==o.length-1){setTimeout(function(){j.fadeOut(k.time,function(){a.kag.ftag.nextOrder()})},parseInt(k.time))}})}})})}};function c(l,j){var n=new XMLHttpRequest();n.open("GET",l,false);n.overrideMimeType("text/plain; charset=Shift_JIS");try{n.send(null)}catch(q){d}var p=[];var k=n.responseText.split("\n");for(var o=0;o<k.length;++o){var m=k[o].replace(",","\\").split(",");if(m[0]!=0){p.push("data\\"+m)}}a.kag.tmp.loading.csv.line=p;if(typeof j=="function"){j()}}(function(j){for(var l,k=0;k<j.length;k++){l=j[k];a.kag.ftag.master_tag[l]=object(a.kag.tag[l]);a.kag.ftag.master_tag[l].kag=a.kag}}(["loading","loading_image","loading_text","loading_prog","endloading","loading_show"]))}(window.jQuery,window.TYRANO,window.TYRANO.kag.stat.mp));